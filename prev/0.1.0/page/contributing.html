<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="A set of commonly used modules for HPC">
    <meta name="author" content="Jorge Luis Galvez Vallejo" >
    <link rel="icon" href="../favicon.png">

    <title>Contributing &ndash; PIC</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">PIC <small>v0.1.0</small></a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html">About PIC</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>Contributing</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='index.html'>About PIC</a></li>
              <li class="breadcrumb-item active" aria-current="page">Contributing</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="index.html">About PIC</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link active disabled" href="contributing.html">Contributing</a>
              <a class="nav-link" href="design.html">Design</a>
              <a class="nav-link" href="releases/index.html">Official Releases</a>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <h2 id="contributing-to-pic">Contributing to PIC</h2>
<p>All contributions to PIC are welcome! If you have an idea for a new feature, a bug fix, or an improvement, please open an issue or submit a pull request.</p>
<p>PIC is an open source project licensed under the MIT License, so you can use it in your own projects without any restrictions. If you use PIC in your project and your wrote a paper with it, please consider citing it by including a link to the repository in your paper.</p>
<p>All code that you contribute to PIC will be licensed under the MIT license, so please make sure that you are comfortable with this before submitting your changes.</p>
<p>I also do not mind if you look at my code and copy paste it into yours, that&rsquo;s what the MIT license is for, right? Just make sure to comply with the license terms and give the repo a star.</p>
<h2 id="how-to-contribute">How to contribute</h2>
<p>The following guidelines will help you contribute effectively:</p>
<ul>
<li><strong>Fork the repository</strong>: Create your own fork of the PIC repository on GitHub.</li>
<li><strong>Create a new branch</strong>: Always create a new branch for your changes. This keeps your work organized and makes it easier to manage pull requests. I don&rsquo;t really care about the branch name, but I suggest you abide by <code>[type]/[description]</code> format; where <code>type</code> is one of <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>chore</code>, and <code>experiment</code>.</li>
<li><strong>Write tests</strong>: If you are adding new features or fixing bugs, please include tests to ensure that your changes work as expected.</li>
<li><strong>Follow the coding style</strong>: Please adhere to the coding style used in the project. This includes naming conventions, indentation, and commenting.</li>
<li><strong>Document your changes</strong>: Update the documentation to reflect any changes you make. This includes updating the README, comments in the code, and any relevant documentation files.</li>
<li><strong>Run tests</strong>: Before submitting your changes, make sure to run the tests to ensure that everything works as expected. The CI should catch any compiler issues.</li>
<li><strong>Submit a pull request</strong>: Once you have made your changes and tested them, submit a pull request to the main repository. Provide a clear description of your changes and why they are needed.</li>
</ul>
<p>The most important thing in the code is that we are aiming to support <code>int32</code> and <code>int64</code> as the default integer types. This is why
we use the <code>default_int</code> parameter in the <code>pic_types.F90</code> module. When you are writing new code, please ensure that it is compatible with both integer types by always using <code>integer(default_int)</code> instead of <code>integer</code> or <code>integer(kind=4)</code> or <code>integer(kind=8)</code>.</p>
<h3 id="on-the-use-of-llms-ai-thingies-etc">On the use of LLMs, AI thingies, etc.</h3>
<p>I do not care. As long as your code is tested, works, and is well documented I could not care less if you used an AI to write it.</p>
<p>Can I copy paste code from PIC into ChatGPT, Claude, or whatever AI I use? Yes, you can. I don&rsquo;t care. I do not consider this plagiarism, since the code is open source and you are free to use it as you wish.</p>
<h2 id="documenting-your-code">Documenting your code</h2>
<p>We use Ford to generate the documentation. The idea is to have coverage of almost every function in the code, except those that
can be self explanatory or if they are <code>module procedure</code> inside an <code>interface</code> block. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="w">  </span><span class="n">interface</span><span class="w"> </span><span class="n">fill</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="n">provides</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">generic</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">assing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">value</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="p">(</span><span class="n">int32</span><span class="p">,</span><span class="w"> </span><span class="n">int64</span><span class="p">,</span><span class="w"> </span><span class="n">sp</span><span class="p">,</span><span class="w"> </span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">pic_types</span><span class="p">.</span><span class="n">F90</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">inteface</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">filling</span><span class="w"> </span><span class="mi">1</span><span class="n">d</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="mi">2</span><span class="n">d</span><span class="w"> </span><span class="n">arrays</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">specified</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="n">variables</span>
<span class="w">  </span><span class="err">!!</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="k">Usage</span><span class="err">:</span><span class="w"> </span><span class="k">call</span><span class="w"> </span><span class="n">fill</span><span class="p">(</span><span class="k">array</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="o">[</span><span class="n">optional</span><span class="o">]</span><span class="w"> </span><span class="n">threaded</span><span class="p">)</span>
<span class="w">  </span><span class="err">!!</span>
<span class="w">  </span><span class="err">!!</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">subroutine</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">threaded</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">performance</span><span class="w"> </span><span class="n">purposes</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">threaded</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="p">.</span><span class="k">true</span><span class="p">.</span>
<span class="w">  </span><span class="err">!!</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_vector_int32</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_vector_int64</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_vector_sp</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_vector_dp</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_matrix_int32</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_matrix_int64</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_matrix_sp</span>
<span class="w">    </span><span class="k">module</span><span class="w"> </span><span class="k">procedure</span><span class="w"> </span><span class="n">fill_matrix_dp</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="n">interface</span>
</code></pre></div>

<p>There&rsquo;s really no need to go document each <code>fill_vector_*</code> or <code>fill_matrix_*</code> procedure, since the interface already provides
everything we need to know about the procedures within the <code>fill</code> interface. Documenting each of these would mean to just
write <code>fills a vector of type int32 with the value alpha, uses threads if enabled</code> which is redundant and not really useful.</p>
<h2 id="code-style">Code style</h2>
<p>We mostly follow the best practices outlined in the <a href="https://fortran-lang.org/learn/best-practices/">Fortran Best Practices</a> guide.</p>
<p>We have a pre-commit hook that will run <code>fprettify</code> to format the code before committing, this will ensure that the formatting is consistent across the codebase.</p>
<p>To install pre-commit do:</p>
<div class="codehilite"><pre><span></span><code>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>pre-commit
pre-commit<span class="w"> </span>install
</code></pre></div>

<p>You can also run <code>pre-commit run --all-files</code> to format all the files in the repository.</p>
<h3 id="module-naming-convention">Module naming convention</h3>
<p>All our of modules are named using the <code>pic_</code> prefix, followed by the name of the module. For example, the module that provides the basic types is called <code>pic_types</code>, and the module that provides the BLAS functionality is called <code>pic_blas_interfaces</code>. MOst of the time the module name matches the name of the file, if you find an instance where this is not the case, please open an issue or submit a pull request to fix it.</p>
<p>Based on the <code>file = module_name</code> convention, there should only be one module per file.</p>
<p>We follow the convention that the <code>end module</code> statement should contain the name of the module.</p>
<h3 id="derived-type-naming-convention">Derived type naming convention</h3>
<p>All derived types should include the suffix <code>_type</code> in their naming.</p>
<h3 id="function-and-subroutine-naming-convention">Function and subroutine naming convention</h3>
<p>I really don&rsquo;t care about naming conventions for functions or subroutines, I only suggest that you make the name descriptive and meaningful. Also,
using interfaces to hide the name of the subroutine inside the module is a good practice, since it allows you to change the implementation without affecting the users of the module.</p>
<p>For example, in <code>pic_timer.F90</code> we have the following interface:</p>
<div class="codehilite"><pre><span></span><code><span class="w">   </span><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">timer_type</span>
<span class="w">    </span><span class="c">!! derived type for a timer, contains the start, stop, and count variables</span>
<span class="w">    </span><span class="c">!! can work with or without omp</span>
<span class="w">      </span><span class="k">private</span>
<span class="k">      </span><span class="kt">real</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">start_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0_dp</span>
<span class="w">      </span><span class="kt">real</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">stop_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0_dp</span>
<span class="w">      </span><span class="kt">real</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">walltime</span>
<span class="w">      </span><span class="kt">logical</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">is_running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<span class="w">      </span><span class="kt">integer</span><span class="p">(</span><span class="n">default_int</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">start_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0_default_int</span>
<span class="w">      </span><span class="kt">integer</span><span class="p">(</span><span class="n">default_int</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">stop_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0_default_int</span>
<span class="w">      </span><span class="kt">integer</span><span class="p">(</span><span class="n">default_int</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">count_rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1_default_int</span>
<span class="w">   </span><span class="k">contains</span>
<span class="k">      procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">timer_start</span>
<span class="w">      </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">stop</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">timer_stop</span>
<span class="w">      </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">print_time</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">timer_print_time</span>
<span class="w">      </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get_elapsed_time</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">timer_get_elapsed_time</span>
<span class="w">   </span><span class="k">end type </span><span class="n">timer_type</span>
</code></pre></div>

<p>You can see that the <code>start</code> procedure is mapped to <code>timer_start</code>, this way it is more intuitive for people to use <code>my_timer%start()</code> instead of <code>my_timer%timer_start()</code>. This is a good practice to follow, since it makes the code more readable and easier to use.</p>
<p>We follow the same convention for functions and subroutines, as we do for modules. This is, the <code>end function</code> or <code>end subroutine</code> statement should contain the name of the function or subroutine.</p>
<h2 id="code-reviews">Code reviews</h2>
<p>Code reviews are an essential part of the contribution process. When you submit a pull request, it will be reviewed by the maintainers of the project. They will provide feedback on your code, suggest improvements, and ensure that it meets the project&rsquo;s standards.</p>
<p>Please be open to feedback and willing to make changes to your code based on the review. The goal is to improve the quality of the code and ensure that it is maintainable in the long run.</p>
<p>If you are new to contributing to open source projects, don&rsquo;t be discouraged by the review process. It is a learning experience, and the maintainers are here to help you improve your code and understand the project better.</p>
<p>If you feel connected to the project and want to help out with reviews, please let me know. I would be happy to invite as many people as possible to the main repository.</p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              PIC
 was developed by Jorge Luis Galvez Vallejo<br>              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2025-10-29 16:26 +1100             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>