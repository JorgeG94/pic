<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="A set of commonly used modules for HPC">
    <meta name="author" content="Jorge Luis Galvez Vallejo" >
    <link rel="icon" href="../favicon.png">

    <title>Design &ndash; PIC</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../css/fontawesome.min.css" rel="stylesheet">
    <link href="../css/brands.min.css" rel="stylesheet">
    <link href="../css/regular.min.css" rel="stylesheet">
    <link href="../css/solid.min.css" rel="stylesheet">
    <link href="../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../css/local.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <script src="../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../index.html">PIC </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="index.html">About PIC</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../lists/types.html">Derived Types</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>Design</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='index.html'>About PIC</a></li>
              <li class="breadcrumb-item active" aria-current="page">Design</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="index.html">About PIC</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link" href="contributing.html">Contributing</a>
              <a class="nav-link active disabled" href="design.html">Design</a>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <h2 id="design-philosophy">Design philosophy</h2>
<p>The idea of this library was inspired a bit by a very cool talk Chris Lattner gave
at some conference. In his talk, he mentions how the LLVM project just grew in
many directions thanks to how the design of the project was done. I.e. the fact
that most of the components of the LLVM are in the <code>lib</code> subdirectory.</p>
<p>If you&rsquo;ve never compiled the LLVM I suggest you do it, you&rsquo;ll see that you can
enable different compoenents depending on your needs. Rarely does one need to build
<em>everything</em> in it.</p>
<p>The same idea will be applied to PIC. I want to provide a set of components
that can be used independently of each other. There will be of course, a core library
that will provide the most basic functionality. For example, everything at the very bottom depends
on the <code>pic_types.F90</code> module, so you cannot really use PIC without it.</p>
<p>So following this concept, PIC will create a series of libraries that are based
upon the core library, i.e. the very basic functionality that will always be built
no matter what project you select on top.</p>
<p>This idea is more important if you&rsquo;re using the CMake build system, since this
will need to be configured when building from source. Otherwise, if you are using
the Fortrn package manager and using <code>pic</code> as a dependency in your project, the FPM
will only builds the modules/components that you actually include in your project.</p>
<p>I find this very neat.</p>
<p>At this point, the core library is everything, I haven&rsquo;t refactored the code to be
built into separate libraries, however I already have the modularity to not build
certain bits, like BLAS, or MPI. I envision the following structure</p>
<div class="codehilite"><pre><span></span><code>libpic_core
libpic_blas
libpic_mpi
libpic_gpu
</code></pre></div>

<p>And PIC will be able to build all of these with <code>default_int</code> set to either <code>int32</code> or <code>int64</code>, depending on the needs of the user.
Naturally, the MPI module will only use <code>int32</code> as the default integer type, since MPI (<code>mpi_f08</code>) does not support <code>int64</code> in its API.</p>
<h2 id="design-goals">Design goals</h2>
<p>I hope that this library will be useful for many people, mostly as a fast and efficient way to
write parallel code in Fortran. I also hope that it will be a good example of how
to write (modern) Fortran code that is modular, extensible, and easy to use.</p>
<p>This is also my attempt into showcasing that Fortran is not a boring old language that only has
a relevance in legacy code.</p>
<p>I want to show that Fortran can be used to write modern, high-performance code that is easy to read and maintain.</p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              PIC
 was developed by Jorge Luis Galvez Vallejo<br>              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2025-10-19 09:48 +0000             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>